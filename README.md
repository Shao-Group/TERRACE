# Introduction

TERRACE is a circRNA assembler for paired-end RNA-seq data.

# Usage

The usage of `TERRACE` is:
```
terrace -i <input.bam> -o <output.gtf> -fa <reference-genome.fa> --read_length <length-of-paired-end-reads> -r [reference_annotation.gtf] -fe [feature_file] [options]
```

The `input.bam` is the read alignment file generated by some RNA-seq aligner, (for example, STAR or HISAT2).
Make sure that it is sorted; otherwise run `samtools` to sort it:
```
samtools sort input.bam > input.sort.bam
```
The reconstructed circular transcripts shall be written as GTF format into `output.gtf`.

`reference-genome.fa` is the reference genome file in fasta format. Recommended - Gencode GRCh37/GRCh38.

`length-of-paired-end-reads` is the length of the reads used to produce the alignment file.

`reference_annotation.gtf` is the annotation file in GTF format. This parameter is optional.

`feature_file` is an optional csv file generated by TERRACE that contains circRNA features used in a machine learning model for assigning confidence scores. 


TERRACE support the following parameters. Please refer
to additional explanations below the table.

 Parameters | Default Value | Description
 ------------------------- | ------------- | ----------
 --help  | | print usage of TERRACE and exit
 --version | | print version of TERRACE and exit
 --preview | | show the inferred `library_type` and exit
 --library_type               | empty | chosen from {empty, unstranded, first, second}
 --max_num_cigar              | 1000 | ignore reads with CIGAR size larger than this value
 --min_bundle_gap             | 100 | the minimum distances required to start a new bundle


`--library_type` is highly recommended to provide. The `unstranded`, `first`, and `second`
correspond to `fr-unstranded`, `fr-firststrand`, and `fr-secondstrand` used in standard Illumina
sequencing libraries. If none of them is given, i.e., it is `empty` by default, then TERRACE
will try to infer the `library_type` by itself (see `--preview`). Notice that such inference is based
on the `XS` tag stored in the input `bam` file. If the input `bam` file do not contain `XS` tag,
then it is essential to provide the `library_type` to TERRACE. You can try `--preview` to see
the inferred `library_type`.
